<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversion de Freebet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th {
            background-color: #cce5ff; /* Fond bleu clair pour l'entête */
            color: black;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        .input-table {
            margin-bottom: 20px;
        }
        #detailsMises {
            display: none; /* Cache le tableau des mises au chargement */
        }
        #resultats {
            display: none; /* Cache les résultats au chargement */
        }
        input[type="number"] {
            width: 80px;
            text-align: center;
        }
        .btn-reset {
            padding: 10px 20px;
            margin-top: 10px;
            margin-bottom: 20px; /* Espace sous le bouton */
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px; /* Coins arrondis */
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .btn-reset:hover {
            background-color: #45a049; /* Changement de couleur au survol */
        }
    </style>
</head>
<body>

<h1>Conversion de Freebet</h1>

<!-- Tableau des entrées de cotes -->
<table class="input-table">
    <tr>
        <th>Match</th>
        <th>Cote 1</th>
        <th>Cote N</th>
        <th>Cote 2</th>
        <th>TRJ (%)</th>
    </tr>
    <tr>
        <td>Match 1</td>
        <td><input type="number" id="cote1Match1" placeholder="Cote 1"></td>
        <td><input type="number" id="coteNMatch1" placeholder="Cote N"></td>
        <td><input type="number" id="cote2Match1" placeholder="Cote 2"></td>
        <td><span id="trjMatch1">0</span></td>
    </tr>
    <tr>
        <td>Match 2</td>
        <td><input type="number" id="cote1Match2" placeholder="Cote 1"></td>
        <td><input type="number" id="coteNMatch2" placeholder="Cote N"></td>
        <td><input type="number" id="cote2Match2" placeholder="Cote 2"></td>
        <td><span id="trjMatch2">0</span></td>
    </tr>
    <tr>
        <td>Match 3</td>
        <td><input type="number" id="cote1Match3" placeholder="Cote 1"></td>
        <td><input type="number" id="coteNMatch3" placeholder="Cote N"></td>
        <td><input type="number" id="cote2Match3" placeholder="Cote 2"></td>
        <td><span id="trjMatch3">0</span></td>
    </tr>
</table>

<!-- Bouton pour réinitialiser les cotes -->
<button class="btn-reset" onclick="resetCotes()">Réinitialiser les cotes</button>

<div>
    <label>Gain désiré :</label>
    <input type="number" id="gainDesire" value="100">
</div>

<!-- Affichage des résultats : Mise totale et Taux de conversion -->
<div id="resultats">
    <h2>
        Mise totale en Freebets : <span id="totalMise">0</span> € 
        <br> 
        Taux de conversion : <span id="tauxConversion">0</span> %
    </h2>
</div>

<!-- Tableau des détails des mises -->
<div id="detailsMises">
    <h3>Détails des Mises</h3>
    <table>
        <thead>
            <tr>
                <th>Combinaison</th>
                <th>Cote</th>
                <th>Mise</th>
                <th>Gain net</th>
            </tr>
        </thead>
        <tbody id="detailMises">
        </tbody>
    </table>
</div>

<script>
function calculerTRJ(cote1, coteN, cote2) {
    if (cote1 > 0 && coteN > 0 && cote2 > 0) {
        return 1 / ((1 / cote1) + (1 / coteN) + (1 / cote2));
    }
    return 0;
}

function mettreAJourTRJ() {
    let cote1M1 = parseFloat(document.getElementById('cote1Match1').value) || 0;
    let coteN1M1 = parseFloat(document.getElementById('coteNMatch1').value) || 0;
    let cote2M1 = parseFloat(document.getElementById('cote2Match1').value) || 0;
    let trj1 = calculerTRJ(cote1M1, coteN1M1, cote2M1);
    document.getElementById('trjMatch1').innerText = (trj1 * 100).toFixed(2);

    let cote1M2 = parseFloat(document.getElementById('cote1Match2').value) || 0;
    let coteN1M2 = parseFloat(document.getElementById('coteNMatch2').value) || 0;
    let cote2M2 = parseFloat(document.getElementById('cote2Match2').value) || 0;
    let trj2 = calculerTRJ(cote1M2, coteN1M2, cote2M2);
    document.getElementById('trjMatch2').innerText = (trj2 * 100).toFixed(2);

    let cote1M3 = parseFloat(document.getElementById('cote1Match3').value) || 0;
    let coteN1M3 = parseFloat(document.getElementById('coteNMatch3').value) || 0;
    let cote2M3 = parseFloat(document.getElementById('cote2Match3').value) || 0;
    let trj3 = calculerTRJ(cote1M3, coteN1M3, cote2M3);
    document.getElementById('trjMatch3').innerText = (trj3 * 100).toFixed(2);
}

function toutesLesCotesRemplies() {
    const cotes = document.querySelectorAll('input[type="number"]');
    for (let i = 0; i < cotes.length - 1; i++) {  // -1 pour ignorer le champ "gain désiré"
        if (!cotes[i].value || parseFloat(cotes[i].value) <= 0) {
            return false;  // Si une cote est vide ou <= 0, retourne false
        }
    }
    return true;
}

function afficherOuMasquerTableau() {
    const detailsMises = document.getElementById('detailsMises');
    const resultats = document.getElementById('resultats');
    if (toutesLesCotesRemplies()) {
        detailsMises.style.display = 'block';
        resultats.style.display = 'block';
    } else {
        detailsMises.style.display = 'none';
        resultats.style.display = 'none';
    }
}

function resetCotes() {
    document.getElementById('cote1Match1').value = '';
    document.getElementById('coteNMatch1').value = '';
    document.getElementById('cote2Match1').value = '';
    
    document.getElementById('cote1Match2').value = '';
    document.getElementById('coteNMatch2').value = '';
    document.getElementById('cote2Match2').value = '';
    
    document.getElementById('cote1Match3').value = '';
    document.getElementById('coteNMatch3').value = '';
    document.getElementById('cote2Match3').value = '';

    document.getElementById('trjMatch1').innerText = '0';
    document.getElementById('trjMatch2').innerText = '0';
    document.getElementById('trjMatch3').innerText = '0';

    // Masquer le tableau des détails des mises et réinitialiser les résultats
    document.getElementById('detailsMises').style.display = 'none';
    document.getElementById('resultats').style.display = 'none';

    document.getElementById('totalMise').innerText = '0';
    document.getElementById('tauxConversion').innerText = '0';

    calculerMises(); // Mise à jour après réinitialisation
}

function calculerMises() {
    let cote1M1 = parseFloat(document.getElementById('cote1Match1').value);
    let coteN1M1 = parseFloat(document.getElementById('coteNMatch1').value);
    let cote2M1 = parseFloat(document.getElementById('cote2Match1').value);
    
    let cote1M2 = parseFloat(document.getElementById('cote1Match2').value);
    let coteN1M2 = parseFloat(document.getElementById('coteNMatch2').value);
    let cote2M2 = parseFloat(document.getElementById('cote2Match2').value);
    
    let cote1M3 = parseFloat(document.getElementById('cote1Match3').value);
    let coteN1M3 = parseFloat(document.getElementById('coteNMatch3').value);
    let cote2M3 = parseFloat(document.getElementById('cote2Match3').value);
    
    let gainDesire = parseFloat(document.getElementById('gainDesire').value);

    if (!toutesLesCotesRemplies()) {
        return;
    }

    let ordreCombinaisons = [
        '111', '11N', '112', '1N1', '1NN', '1N2', '121', '12N', '122',
        'N11', 'N1N', 'N12', 'NN1', 'NNN', 'NN2', 'N21', 'N2N', 'N22',
        '211', '21N', '212', '2N1', '2NN', '2N2', '221', '22N', '222'
    ];

    let cotes = {
        '111': cote1M1 * cote1M2 * cote1M3,
        '11N': cote1M1 * cote1M2 * coteN1M3,
        '112': cote1M1 * cote1M2 * cote2M3,
        '1N1': cote1M1 * coteN1M2 * cote1M3,
        '1NN': cote1M1 * coteN1M2 * coteN1M3,
        '1N2': cote1M1 * coteN1M2 * cote2M3,
        '121': cote1M1 * cote2M2 * cote1M3,
        '12N': cote1M1 * cote2M2 * coteN1M3,
        '122': cote1M1 * cote2M2 * cote2M3,
        'N11': coteN1M1 * cote1M2 * cote1M3,
        'N1N': coteN1M1 * cote1M2 * coteN1M3,
        'N12': coteN1M1 * cote1M2 * cote2M3,
        'NN1': coteN1M1 * coteN1M2 * cote1M3,
        'NNN': coteN1M1 * coteN1M2 * coteN1M3,
        'NN2': coteN1M1 * coteN1M2 * cote2M3,
        'N21': coteN1M1 * cote2M2 * cote1M3,
        'N2N': coteN1M1 * cote2M2 * coteN1M3,
        'N22': coteN1M1 * cote2M2 * cote2M3,
        '211': cote2M1 * cote1M2 * cote1M3,
        '21N': cote2M1 * cote1M2 * coteN1M3,
        '212': cote2M1 * cote1M2 * cote2M3,
        '2N1': cote2M1 * coteN1M2 * cote1M3,
        '2NN': cote2M1 * coteN1M2 * coteN1M3,
        '2N2': cote2M1 * coteN1M2 * cote2M3,
        '221': cote2M1 * cote2M2 * cote1M3,
        '22N': cote2M1 * cote2M2 * coteN1M3,
        '222': cote2M1 * cote2M2 * cote2M3
    };

    let totalMise = 0;
    let tbody = document.getElementById('detailMises');
    tbody.innerHTML = '';

    ordreCombinaisons.forEach(combinaison => {
        let cote = cotes[combinaison];
        if (cote > 0) {
            // Calcul du gain net avec freebet : (Cote - 1) * Mise
            let mise = (gainDesire / (cote - 1)).toFixed(2);
            totalMise += parseFloat(mise);
            let gainNet = (cote - 1) * mise;
            
            let row = `
                <tr>
                    <td>${combinaison}</td>
                    <td>${cote.toFixed(2)}</td>
                    <td>${mise} €</td>
                    <td>${gainNet.toFixed(2)} €</td>
                </tr>
            `;
            tbody.innerHTML += row;
        }
    });

    document.getElementById('totalMise').innerText = totalMise.toFixed(2);

    // Calcul du taux de conversion : (Gain désiré / Total des mises) * 100
    let tauxConversion = (gainDesire / totalMise) * 100;
    document.getElementById('tauxConversion').innerText = tauxConversion.toFixed(2);

    afficherOuMasquerTableau();
}

// Mettre à jour le TRJ en temps réel à chaque saisie
document.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('input', () => {
        mettreAJourTRJ();
        calculerMises();
    });
});

</script>

</body>
</html>
